{% extends 'base.html' %}
{% block body %}
	<div id="main-body">
		<div id="collection-info-card">
			<img width="100%" src="{{ url_for('static', filename='images/banners/' + collection.author.banner_image) }}">
			<div id="collection-info">
				<h2>{{ collection.name }}</h2>
				<span>
					{{ length(collection.posts) }} Posts · 

					{% if collection.date_updated_ago() %}
						 Last updated {{ collection.date_updated_ago() }}
					 {% else %}
					 	Never Updated Before
					{% endif %}
				</span>
			</div>
			<div id="collection-creator-container">
				<div id="collection-creator">
					<a href="{{ url_for('users.user_page', username=collection.author.username) }}">
						<img height="32px" width="32px" draggable="false" src="{{ url_for('static', filename='images/profile_pics/' + collection.author.image_file) }}">
					</a>
					<a href="{{ url_for('users.user_page', username=collection.author.username) }}">{{ collection.author.username }}</a>
				</div>

				{% if current_user.id == collection.author.id %}
					<div>
						<button id="collection-options-button">
							<img height="100%" width="100%" draggable="false" src="{{ url_for('static', filename='icons/kebab_menu.png') }}"/>
						</button>

						<div id="collection-options-menu" style="display: none;">
							<form method="POST">
								<button id="collection-delete-button" type="submit">
									<i class="fa fa-trash" aria-hidden="true"></i>
									<span>Delete Collection</span>
								</button>
							</form>
						</div>
					</div>
				{% endif %}
			</div>
		</div>

		<div id="collection-posts-container">
			{% if collection.posts %}
				{% for post in collection.posts %}
					<article class="post-container">
						<div class="post-header">
							<a href="{{ url_for('users.user_page', username=post.author.username) }}">
								<img class="post-user-img" height="32" width="32" draggable="false" src="{{ url_for('static', filename='images/profile_pics/' + post.author.image_file) }}">
							</a>
							<div class="post-header-info">
								<a href="{{ url_for('users.user_page', username=post.author.username) }}">
									{{ post.author.username }}
								</a>
								<span>{{ length(post.author.followers) }} Followers</span>
							</div>
						</div>

						<div class="post-title">
							<a href="{{ url_for('posts.post', post_id=post.id, list=collection_id) }}">{{ post.title }}</a>
							{{ post.views }} views · {{ post.date_posted_ago() }}
						</div>

						<p class="post-content">{{ limit_content[post.id] }}</p>
					</article>
				{% endfor %}
			{% else %}
				<p>No posts here yet</p>
			{% endif %}
		</div>
	</div>
{% endblock body %}