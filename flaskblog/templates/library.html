{% extends 'base.html' %}

{% block body %}
	<div id="main-body">
		<div class="library-section">
			<div class="library-header">
				<h2>Collections</h2>
			</div>
			<div class="library-body">
				{% if collections %}
					{% for post in collections %}
						<article class="post-container">
							<div class="post-header">
								<img class="post-user-img" height="32" width="32" draggable="false" src="{{ url_for('static', filename='images/profile_pics/' + post.author.image_file) }}">
								<a href="{{ url_for('users.user_posts', username=post.author.username) }}">
									{{ post.author.username }}
								</a>
							</div>

							<div class="post-title">
								<a href="{{ url_for('posts.post', post_id=post.id) }}">{{ post.title }}</a>
								{{ post.date_posted.strftime('%Y-%m-%d') }}
							</div>

							<p class="post-content">{{ historical_posts_limit_content[post.id] }}</p>
						</article>
					{% endfor %}

					{% if historical_posts_count > 0 %}
						<button class="library-view-button" onclick="redirect(`{{ url_for('main.history') }}`)">
							Show {{ historical_posts_count }} More Posts
						</button>
					{% endif %}
				{% else %}
					<p class="library-filler">Once you create some collections they will show up here</p>
				{% endif %}
			</div>
		</div>

		<div class="library-section">
			<div class="library-header">
				<h2>History</h2>
			</div>
			<div class="library-body">
				{% if historical_posts %}
					{% for post in historical_posts %}
						<article class="post-container">
							<div class="post-header">
								<img class="post-user-img" height="32" width="32" draggable="false" src="{{ url_for('static', filename='images/profile_pics/' + post.author.image_file) }}">
								<div class="post-header-info">
									<a href="{{ url_for('users.user_posts', username=post.author.username) }}">
										{{ post.author.username }}
									</a>
									<span>{{ length(post.author.followers) }} Followers</span>
								</div>
							</div>

							<div class="post-title">
								<a href="{{ url_for('posts.post', post_id=post.id) }}">{{ post.title }}</a>
								{{ post.views }} views · {{ post.date_posted_ago() }}
							</div>

							<p class="post-content">{{ historical_posts_limit_content[post.id] }}</p>
						</article>
					{% endfor %}

					{% if historical_posts_count > 0 %}
						<button class="library-view-button" onclick="redirect(`{{ url_for('main.history') }}`)">
							Show {{ historical_posts_count }} More Posts
						</button>
					{% endif %}
				{% else %}
					<p class="library-filler">Once you view some posts they will show up here</p>
				{% endif %}
			</div>
		</div>

		<div class="library-section">
			<div class="library-header">
				<h2>Liked Posts</h2>
			</div>
			<div class="library-body">
				{% if liked_posts %}
					{% for post in liked_posts %}
						<article class="post-container">
							<div class="post-header">
								<img class="post-user-img" height="32" width="32" draggable="false" src="{{ url_for('static', filename='images/profile_pics/' + post.author.image_file) }}">
								<div class="post-header-info">
									<a href="{{ url_for('users.user_posts', username=post.author.username) }}">
										{{ post.author.username }}
									</a>
									<span>{{ length(post.author.followers) }} Followers</span>
								</div>
							</div>

							<div class="post-title">
								<a href="{{ url_for('posts.post', post_id=post.id) }}">{{ post.title }}</a>
								{{ post.views }} views · {{ post.date_posted_ago() }}
							</div>

							<p class="post-content">{{ liked_posts_limit_content[post.id] }}</p>
						</article>
					{% endfor %}

					{% if liked_posts_count > 0 %}
						<button class="library-view-button" onclick="redirect(`{{ url_for('main.liked') }}`)">
							Show {{ liked_posts_count }} More Posts
						</button>
					{% endif %}
				{% else %}
					<p class="library-filler">Once you like some posts they will show up here</p>
				{% endif %}
			</div>
		</div>

		<div class="library-section">
			<div class="library-header">
				<h2>Your Posts</h2>
			</div>
			<div class="library-body">
				{% if created_posts %}
					{% for post in created_posts %}
						<article class="post-container">
							<div class="post-header">
								<img class="post-user-img" height="32" width="32" draggable="false" src="{{ url_for('static', filename='images/profile_pics/' + post.author.image_file) }}">
								<div class="post-header-info">
									<a href="{{ url_for('users.user_posts', username=post.author.username) }}">
										{{ post.author.username }}
									</a>
									<span>{{ length(post.author.followers) }} Followers</span>
								</div>
							</div>

							<div class="post-title">
								<a href="{{ url_for('posts.post', post_id=post.id) }}">{{ post.title }}</a>
								{{ post.views }} views · {{ post.date_posted_ago() }}
							</div>

							<p class="post-content">{{ created_posts_limit_content[post.id] }}</p>
						</article>
					{% endfor %}

					{% if created_posts_count > 0 %}
						<button class="library-view-button" onclick="redirect(`{{ url_for('users.user_posts', username=current_user.username) }}`)">
							Show {{ created_posts_count }} More Posts
						</button>
					{% endif %}
				{% else %}
					<p class="library-filler">After you create some posts they will show up here</p>
				{% endif %}
			</div>
		</div>
	</div>
{% endblock %}